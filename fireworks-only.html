<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fireworks</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    overflow: hidden;
    font-family: Arial, sans-serif;
}

#fireworksCanvas {
    position: fixed;
    inset: 0;
    background: black;
    z-index: 0;
    display: block;
}
</style>
</head>

<body>

<canvas id="fireworksCanvas"></canvas>

<script>
/* ================= FIREWORKS ================= */
const fwCanvas = document.getElementById('fireworksCanvas');
const fwCtx = fwCanvas.getContext('2d');

function resizeFW() {
    fwCanvas.width = innerWidth;
    fwCanvas.height = innerHeight;
}
resizeFW();
addEventListener('resize', resizeFW);

class Particle {
    constructor(x,y,color){
        this.x=x; this.y=y; this.color=color;
        this.vx=(Math.random()-0.5)*8;
        this.vy=(Math.random()-0.5)*8;
        this.alpha=1;
        this.decay=Math.random()*0.015+0.01;
        this.gravity=0.05;
    }
    update(){
        this.vy+=this.gravity;
        this.x+=this.vx;
        this.y+=this.vy;
        this.alpha-=this.decay;
    }
    draw(){
        fwCtx.save();
        fwCtx.globalAlpha=this.alpha;
        fwCtx.fillStyle=this.color;
        fwCtx.beginPath();
        fwCtx.arc(this.x,this.y,2,0,Math.PI*2);
        fwCtx.fill();
        fwCtx.restore();
    }
}

class Firework {
    constructor(){
        this.x=Math.random()*fwCanvas.width;
        this.y=fwCanvas.height;
        this.targetY=Math.random()*fwCanvas.height*0.5+50;
        this.speed=(this.y-this.targetY)/60;
        this.exploded=false;
        this.particles=[];
        this.color=`hsl(${Math.random()*360},100%,60%)`;
    }
    update(){
        if(!this.exploded){
            this.y-=this.speed;
            if(this.y<=this.targetY) this.explode();
        } else {
            this.particles.forEach((p,i)=>{
                p.update();
                if(p.alpha<=0) this.particles.splice(i,1);
            });
        }
    }
    explode(){
        this.exploded=true;
        for(let i=0;i<120;i++){
            this.particles.push(new Particle(this.x,this.y,this.color));
        }
    }
    draw(){
        if(!this.exploded){
            fwCtx.fillStyle=this.color;
            fwCtx.beginPath();
            fwCtx.arc(this.x,this.y,3,0,Math.PI*2);
            fwCtx.fill();
        } else {
            this.particles.forEach(p=>p.draw());
        }
    }
    done(){ return this.exploded && this.particles.length===0; }
}

const fireworks=[];
let last=0;

function animateFW(t){
    fwCtx.fillStyle='rgba(0,0,0,0.15)';
    fwCtx.fillRect(0,0,fwCanvas.width,fwCanvas.height);

    if(t-last>600){
        fireworks.push(new Firework());
        last=t;
    }

    fireworks.forEach((f,i)=>{
        f.update(); f.draw();
        if(f.done()) fireworks.splice(i,1);
    });

    requestAnimationFrame(animateFW);
}
animateFW(0);
</script>
</body>
</html>
